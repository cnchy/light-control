(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/lightList/lightList"],{"1b14":function(t,n,o){},"22e8":function(t,n,o){"use strict";o.r(n);var e=o("42d4"),i=o("b775");for(var f in i)"default"!==f&&function(t){o.d(n,t,function(){return i[t]})}(f);o("a2b7");var r,s=o("f0c5"),a=Object(s["a"])(i["default"],e["b"],e["c"],!1,null,"3d0d2638",null,!1,e["a"],r);n["default"]=a.exports},"42d4":function(t,n,o){"use strict";var e,i=function(){var t=this,n=t.$createElement,o=(t._self._c,t.getOnOffImg()),e=t.__map(t.room1.lights,function(n,o){var e=t.getRgbColor(n),i=t.getRgbColor(n);return{$orig:t.__get_orig(n),m1:e,m2:i}}),i=t.__map(t.room2.lights,function(n,o){var e=t.getRgbColor(n),i=t.getRgbColor(n);return{$orig:t.__get_orig(n),m3:e,m4:i}}),f=t.__map(t.desklamps.lights,function(n,o){var e=t.getRgbColor(n),i=t.getRgbColor(n);return{$orig:t.__get_orig(n),m5:e,m6:i}});t._isMounted||(t.e0=function(n){t.isDropLight=!t.isDropLight},t.e1=function(n){t.presetShow=!0},t.e2=function(n){t.advence=!t.advence},t.e3=function(n){t.advence=!t.advence},t.e4=function(n){t.presetShow=!1},t.e5=function(n){t.presetShow=!1}),t.$mp.data=Object.assign({},{$root:{m0:o,l0:e,l1:i,l2:f}})},f=[];o.d(n,"b",function(){return i}),o.d(n,"c",function(){return f}),o.d(n,"a",function(){return e})},8145:function(t,n,o){"use strict";(function(t){o("a0ed");e(o("66fd"));var n=e(o("22e8"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("6e42")["createPage"])},a2b7:function(t,n,o){"use strict";var e=o("1b14"),i=o.n(e);i.a},b775:function(t,n,o){"use strict";o.r(n);var e=o("f289"),i=o.n(e);for(var f in e)"default"!==f&&function(t){o.d(n,t,function(){return e[t]})}(f);n["default"]=i.a},f289:function(t,n,o){"use strict";(function(t,e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(o("4698")),f=o("5d00");function r(t){return t&&t.__esModule?t:{default:t}}function s(t){return u(t)||g(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var n=0,o=new Array(t.length);n<t.length;n++)o[n]=t[n];return o}}var h=o("b1da"),c=function(){return Promise.all([o.e("common/vendor"),o.e("components/yp-number-box/yp-number-box")]).then(o.bind(null,"427a"))},l=function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"272b"))},d={components:{uniPopup:l,ypNumberBox:c},data:function(){return{isDropLight:!0,plugins:h,bg_titlebar:i.default,advence:!1,onOff:!1,presetShow:!1,presetName:"方案",currentLight:{id:"01",no:"15",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},room1:{onOff:!1,lights:[{id:"01",no:"15",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"02",no:"01",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"03",no:"04",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"04",no:"09",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"05",no:"06",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"06",no:"02",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"07",no:"11",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"08",no:"03",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}}]},desklamps:{onOff:!1,lights:[{id:"01",no:"21",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"02",no:"22",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"03",no:"23",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"04",no:"24",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"05",no:"25",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"06",no:"26",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"07",no:"27",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"08",no:"28",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"09",no:"29",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}},{id:"10",no:"30",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50}}]},room2:{onOff:!1,lights:[{id:"09",no:"16",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"10",no:"13",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"11",no:"14",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"12",no:"05",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"13",no:"10",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"14",no:"12",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"15",no:"08",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}},{id:"16",no:"07",onOff:!1,colortempreture:5e3,info:{R:222,G:333,B:444,H:555,L:666,A:50,D:40}}]}}},onHide:function(){console.log(t("页面关闭"," at pages\\lightList\\lightList.vue:615"))},methods:{turnAllOnOff:function(){var t=this,n=this;this.onOff=!this.onOff,e.showLoading({title:this.onOff?"开启中...":"关闭中..."}),setTimeout(function(){e.hideLoading()},1e3),this.onOff?e.getStorage({key:"lastSetting",success:function(t){t.data.room1&&t.data.room2&&t.data.desklamps&&(n.room1=t.data.room1,n.room2=t.data.room2,n.desklamps=t.data.desklamps),n.room1.onOff=n.onOff,n.room2.onOff=n.onOff,n.desklamps.onOff=n.onOff,n.room1.lights.forEach(function(t){t.onOff=n.onOff}),n.room2.lights.forEach(function(t){t.onOff=n.onOff}),n.desklamps.lights.forEach(function(t){t.onOff=n.onOff}),n.userPresert()}}):(this.saveLastSetting(),this.send("!S00_R000_G000_B000_H000_L000_pp#"),this.room1.onOff=this.onOff,this.room2.onOff=this.onOff,this.desklamps.onOff=this.onOff,this.room1.lights.forEach(function(n){n.onOff=t.onOff}),this.room2.lights.forEach(function(n){n.onOff=t.onOff}),this.desklamps.lights.forEach(function(n){n.onOff=t.onOff}))},turnOnOffRoom:function(t){var n=this;t.onOff=!t.onOff,t.lights.forEach(function(o){if(o.onOff=t.onOff,o.onOff)n.sigleLightSetting(o);else{var e="!S"+o.no+"_R000_G000_B000_H000_L000_pp#";n.send(e)}})},turnOnOff:function(t){if(t.onOff=!t.onOff,this.currentLight=t,this.$forceUpdate(),t.onOff)this.sigleLightSetting(t);else{var n="!S"+t.no+"_R000_G000_B000_H000_L000_pp#";this.send(n)}},getOnOffImg:function(){return this.onOff?"url('/static/btn_turnonall.png')":"url('/static/btn_turnoffall.png')"},changeColorTemp:function(t,n){n.colortempreture=t.detail.value;var o=(0,f.getColorTemperature)(t.detail.value);n.info.R=o[0],n.info.G=o[1],n.info.B=o[2],n.info.H=o[3],n.info.L=o[4];var e="!S"+n.no+"_R"+this.getLengthStr(n.info.R)+"_G"+this.getLengthStr(n.info.G)+"_B"+this.getLengthStr(n.info.B)+"_H"+this.getLengthStr(n.info.H)+"_L"+this.getLengthStr(n.info.L)+"_pp#";this.send(e)},getColorTemp:function(t,n){},getRgbColor:function(t){var n=t.info,o="";return o=t.onOff?"rgb("+n.R+","+n.G+","+n.B+")":"rgb(123,123,123)",o},changeR:function(t,n){n.info.R=t.detail.value;var o="!S"+n.no+"_R"+this.getLengthStr(n.info.R)+"_pp#";this.send(o)},changeG:function(t,n){n.info.G=t.detail.value;var o="!S"+n.no+"_G"+this.getLengthStr(n.info.G)+"_pp#";this.send(o)},changeB:function(t,n){n.info.B=t.detail.value;var o="!S"+n.no+"_B"+this.getLengthStr(n.info.B)+"_pp#";this.send(o)},changeH:function(t,n){n.info.H=t.detail.value;var o="!S"+n.no+"_H"+this.getLengthStr(n.info.H)+"_pp#";this.send(o)},changeL:function(t,n){n.info.L=t.detail.value;var o="!S"+n.no+"_L"+this.getLengthStr(n.info.L)+"_pp#";this.send(o)},changeA:function(t,n){n.info.A=t.detail.value;var o="!S"+n.no+"_R"+this.getLengthStr(Math.round(n.info.A*n.info.R/100))+"_G"+this.getLengthStr(Math.round(n.info.A*n.info.G/100))+"_B"+this.getLengthStr(Math.round(n.info.A*n.info.B/100))+"_H"+this.getLengthStr(Math.round(n.info.A*n.info.H/100))+"_L"+this.getLengthStr(Math.round(n.info.A*n.info.L/100))+"_pp#";this.send(o)},changeD:function(t,n){n.info.D=t.detail.value;var o=(0,f.getLightDegree)(n.no,t.detail.value),e="!S"+n.no+"_D"+this.getLengthStr(o)+"_pp#";this.send(e)},sigleLightSetting:function(t){var n="!S"+t.no+"_R"+this.getLengthStr(t.info.R)+"_G"+this.getLengthStr(t.info.G)+"_B"+this.getLengthStr(t.info.B)+"_H"+this.getLengthStr(t.info.H)+"_L"+this.getLengthStr(t.info.L)+"_pp#";if(this.send(n),t.info.D){var o=(0,f.getLightDegree)(t.no,t.info.D);n="!S"+t.no+"_D"+this.getLengthStr(o)+"_pp#",this.send(n)}},send:function(n){this.saveLastSetting(),null!=this.currentLight&&(this.$refs.music.play(),console.log(t(n," at pages\\lightList\\lightList.vue:793")),e.getStorage({key:"logging",success:function(t){var o=t.data,i=(new Date).getTime();o=[i+"---\x3e"+n].concat(s(o)),o.length>20&&(o=o.splice(o.length-20,o.length-1)),e.setStorage({key:"logging",data:o,success:function(){}})},fail:function(t){var o=(new Date).getTime(),i=[o+"---\x3e"+n];e.setStorage({key:"logging",data:i,success:function(){}})}}),this.plugins.sendTcp(n,function(t){},function(t){}))},saveLastSetting:function(){var n={onOff:this.onOff,room1:this.room1,room2:this.room2,desklamps:this.desklamps};e.setStorage({key:"lastSetting",data:n,success:function(){console.log(t("保存之前设置的值"," at pages\\lightList\\lightList.vue:849"))}})},setLight:function(t){t.onOff?(this.currentLight=t,this.$forceUpdate(),this.$refs.popup.open()):e.showToast({title:"灯未开！"})},getLengthStr:function(t){var n=t;return 0==t?n="000":t<10?n="00"+t:t<100&&(n="0"+t),n},savePreset:function(){var t=this,n={name:this.presetName,data:{room1:this.room1,room2:this.room2,desklamps:this.desklamps}};e.getStorage({key:"preset",success:function(o){var i=o.data;i=[n].concat(s(i)),e.setStorage({key:"preset",data:i,success:function(){e.showToast({title:"保存成功！"})}}),t.presetShow=!1},fail:function(o){t.presetShow=!1,e.setStorage({key:"preset",data:[n],success:function(){}})}}),this.$forceUpdate()},userPresert:function(){var t=this;e.showLoading({title:"请稍等..."}),this.room1.lights.forEach(function(n){if(n.onOff){var o="!S"+n.no+"_R"+t.getLengthStr(n.info.R)+"_G"+t.getLengthStr(n.info.G)+"_B"+t.getLengthStr(n.info.B)+"_H"+t.getLengthStr(n.info.H)+"_L"+t.getLengthStr(n.info.L)+"_pp#";t.send(o);var e=(0,f.getLightDegree)(n.no,n.info.D);o="!S"+n.no+"_D"+t.getLengthStr(e)+"_pp#",t.send(o)}}),this.room2.lights.forEach(function(n){if(n.onOff){var o="!S"+n.no+"_R"+t.getLengthStr(n.info.R)+"_G"+t.getLengthStr(n.info.G)+"_B"+t.getLengthStr(n.info.B)+"_H"+t.getLengthStr(n.info.H)+"_L"+t.getLengthStr(n.info.L)+"_pp#";t.send(o);var e=(0,f.getLightDegree)(n.no,n.info.D);o="!S"+n.no+"_D"+t.getLengthStr(e)+"_pp#",t.send(o)}}),this.desklamps.lights.forEach(function(n){if(n.onOff){var o="!S"+n.no+"_R"+t.getLengthStr(n.info.R)+"_G"+t.getLengthStr(n.info.G)+"_B"+t.getLengthStr(n.info.B)+"_H"+t.getLengthStr(n.info.H)+"_L"+t.getLengthStr(n.info.L)+"_pp#";t.send(o)}}),setTimeout(function(){e.hideLoading()},100)}}};n.default=d}).call(this,o("0de9")["default"],o("6e42")["default"])}},[["8145","common/runtime","common/vendor"]]]);